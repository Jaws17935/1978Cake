<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweet Dreams 甜夢工坊 | 手作甜點專賣</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- CSS 樣式 (維持原本設計，新增 Modal 樣式) --- */
        :root {
            --primary-color: #d4a373;
            --accent-color: #e5989b;
            --bg-color: #fefae0;
            --text-color: #4a4a4a;
            --white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Helvetica Neue", "PingFang TC", sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-color); line-height: 1.6; }
        a { text-decoration: none; color: inherit; }
        img { max-width: 100%; display: block; }
        ul { list-style: none; }

        /* 導航 */
        header { background: var(--white); padding: 1rem 5%; position: fixed; width: 100%; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: bold; color: var(--accent-color); }
        .cart-btn { background: var(--accent-color); color: white; padding: 0.5rem 1rem; border-radius: 20px; cursor: pointer; position: relative; }
        .cart-count { position: absolute; top: -5px; right: -5px; background: red; color: white; font-size: 12px; width: 18px; height: 18px; border-radius: 50%; display: flex; justify-content: center; align-items: center; }

        /* Hero */
        .hero { 
            height: 80vh; 
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://scontent.fkhh1-2.fna.fbcdn.net/v/t39.30808-6/486062514_9088945324564134_6571091185709843036_n.jpg?stp=dst-jpg_s960x960_tt6&_nc_cat=109&ccb=1-7&_nc_sid=cc71e4&_nc_ohc=GSOHRx4CbH0Q7kNvwHzQe7P&_nc_oc=AdnxAWDeW81CkoLAX7_xVqT7QGhXykznc1jeB8ZwATfbaymwsYXmMLFWis-rTnZXxIk&_nc_zt=23&_nc_ht=scontent.fkhh1-2.fna&_nc_gid=tUWvXIrWMOazQil4b1wAiA&oh=00_AfnoDwTaAQ6XCs_TigI_GnyH7dH6jV_nKy_gGvKLLb1HIw&oe=693B280B'); 
            background-size: cover; 
            background-position: center; 
            background-attachment: fixed; /* 視差滾動效果 */
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            text-align: center; 
            color: white; 
            margin-top: 60px; 
            position: relative;
        }
        
        .hero-content {
            /* 移除毛玻璃背景，改為極簡風格 */
            padding: 2rem;
            animation: fadeInUp 1.2s ease-out;
            max-width: 800px;
        }

        .hero h1 { 
            font-size: 4rem; 
            margin-bottom: 1rem; 
            text-shadow: 0 2px 10px rgba(0,0,0,0.3); /* 柔和陰影 */
            letter-spacing: 3px;
            font-weight: 500; /* 稍微減輕字重，更優雅 */
            font-family: "Times New Roman", Serif; /* 嘗試加入襯線體風格，增加質感 */
        }
        
        .hero p { 
            font-size: 1.5rem; 
            margin-bottom: 2.5rem; 
            font-weight: 400;
            letter-spacing: 2px;
            position: relative;
            display: inline-block;
            text-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        /* 裝飾線條 - 已移除 */
        /* .hero p::after { display: none; } */

        .cta-button { 
            background-color: rgba(255, 255, 255, 0.9); /* 改為白底 */
            color: var(--primary-color); /* 文字用主色 */
            padding: 1rem 3.5rem; 
            border-radius: 50px; 
            font-size: 1.1rem; 
            cursor: pointer; 
            border: none; 
            transition: all 0.3s ease; 
            font-weight: bold;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .cta-button:hover { 
            transform: translateY(-3px); 
            background-color: white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            color: #c58e5e;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 產品區 */
        .products { padding: 4rem 10%; }
        .section-title { text-align: center; font-size: 2rem; margin-bottom: 3rem; color: var(--primary-color); }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; }
        .product-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: transform 0.3s; display: flex; flex-direction: column; }
        .product-card:hover { transform: translateY(-5px); }
        .product-img { height: 200px; object-fit: cover; width: 100%; }
        .product-info { padding: 1.5rem; text-align: center; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-title { font-size: 1.2rem; margin-bottom: 0.5rem; font-weight: bold; }
        .product-price { color: var(--accent-color); font-size: 1.1rem; margin-bottom: 1rem; }
        .add-btn { background-color: var(--text-color); color: white; padding: 0.5rem 1rem; border: none; border-radius: 5px; cursor: pointer; width: 100%; transition: 0.2s; }
        .add-btn:hover { background-color: var(--accent-color); }

        /* --- 購物車 Modal (彈出視窗) --- */
        .cart-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; display: none; justify-content: center; align-items: center; }
        .cart-modal { background: white; width: 90%; max-width: 500px; padding: 2rem; border-radius: 10px; max-height: 80vh; overflow-y: auto; position: relative; }
        .cart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; border-bottom: 1px solid #eee; padding-bottom: 0.5rem; }
        .close-cart { cursor: pointer; font-size: 1.5rem; }
        .cart-items { margin-bottom: 1rem; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 10px; background: #f9f9f9; border-radius: 5px; }
        .cart-item-info { display: flex; flex-direction: column; }
        .cart-total { font-size: 1.2rem; font-weight: bold; text-align: right; margin-top: 1rem; color: var(--accent-color); }
        .checkout-btn { background-color: #00c300; /* LINE Green */ color: white; width: 100%; padding: 1rem; border: none; border-radius: 5px; margin-top: 1rem; cursor: pointer; font-size: 1rem; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .checkout-btn:hover { background-color: #00a000; }
        .remove-item { color: red; cursor: pointer; margin-left: 10px; }

        /* 頁尾 */
        footer { background: var(--text-color); color: white; padding: 3rem 10%; text-align: center; }

        @media (max-width: 768px) {
            .hero h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo">Sweet Dreams</div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <a href="https://www.facebook.com/pengcake2017/?locale=zh_TW" target="_blank" style="font-size: 1.5rem; color: #4267B2; display: flex; align-items: center;" title="Facebook 粉絲專頁">
                <i class="fab fa-facebook"></i>
            </a>
            <a href="https://lin.ee/GYORgS6" target="_blank" style="background: #00c300; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem; display: flex; align-items: center; gap: 5px; text-decoration: none;">
                <i class="fab fa-line"></i> 聯絡我們
            </a>
            <div class="cart-btn" onclick="toggleCart()">
                <i class="fas fa-shopping-cart"></i> 購物車
                <div class="cart-count" id="cart-count">0</div>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>手工甜點，傳遞幸福</h1>
            <p>今日下單，新鮮現做</p>
            <button class="cta-button" onclick="document.getElementById('products').scrollIntoView({behavior: 'smooth'})">開始選購</button>
        </div>
    </section>

    <section id="products" class="products">
        <h2 class="section-title">熱銷甜點</h2>
        <div class="product-grid" id="product-list">
            </div>
    </section>

    <section id="about" style="padding: 4rem 10%; background-color: #faedcd; display: flex; align-items: center; gap: 3rem; flex-wrap: wrap;">
        <div style="flex: 1; min-width: 300px;">
            <h2 style="color: var(--primary-color); font-size: 2rem; margin-bottom: 1.5rem;">關於 甜夢工坊</h2>
            <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 1.5rem;">
                Sweet Dreams 甜夢工坊成立於 2023 年的一個暖午後。
                <br><br>
                起初，這只是一個小小的廚房夢想，源自於對「幸福味道」的執著。我們相信，甜點不僅僅是食物，更是一種能療癒心靈的魔法。
                <br><br>
                我們堅持不使用人工香精與防腐劑，嚴選法國依思尼奶油、日本紫羅蘭麵粉，以及台灣在地小農栽種的當季新鮮水果。每一顆蛋糕、每一片餅乾，都是甜點師傅在清晨微光中，親手細心烘焙而成。
                <br><br>
                希望透過這份手作的溫度，將那份純粹的快樂與甜蜜，傳遞給每一位品嚐的人。
            </p>
            <p style="color: var(--accent-color); font-weight: bold; font-size: 1.2rem;">
                讓 Sweet Dreams，陪您度過每一個值得慶祝的時刻。
            </p>
        </div>
        <div style="flex: 1; min-width: 300px;">
            <img src="https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="在地農田" style="width: 100%; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
        </div>
    </section>

    <footer>
        <p>&copy; 2025 Sweet Dreams 甜夢工坊</p>
    </footer>

    <div class="cart-modal-overlay" id="product-modal-overlay" style="z-index: 2001;">
        <div class="cart-modal" style="max-width: 400px; text-align: center;">
            <span class="close-cart" onclick="closeProductModal()" style="position: absolute; right: 20px; top: 15px;">&times;</span>
            <h2 id="modal-product-name" style="margin-bottom: 10px;">產品名稱</h2>
            <img id="modal-product-img" src="" alt="" style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 15px;">
            <p id="modal-product-price" style="color: var(--accent-color); font-size: 1.2rem; margin-bottom: 20px;">NT$ 0</p>
            
            <div style="display: flex; justify-content: center; align-items: center; gap: 15px; margin-bottom: 20px;">
                <button onclick="adjustModalQuantity(-1)" style="width: 35px; height: 35px; border-radius: 50%; border: 1px solid #ccc; background: white; cursor: pointer; font-size: 1.2rem;">-</button>
                <span id="modal-quantity" style="font-size: 1.5rem; font-weight: bold; width: 40px;">1</span>
                <button onclick="adjustModalQuantity(1)" style="width: 35px; height: 35px; border-radius: 50%; border: 1px solid #ccc; background: white; cursor: pointer; font-size: 1.2rem;">+</button>
            </div>

            <button class="checkout-btn" onclick="confirmAddToCart()" style="background-color: var(--primary-color);">
                確認加入購物車
            </button>
        </div>
    </div>

    <div class="cart-modal-overlay" id="cart-overlay">
        <div class="cart-modal">
            <div class="cart-header">
                <h2>您的購物清單</h2>
                <span class="close-cart" onclick="toggleCart()">&times;</span>
            </div>
            <div id="cart-items-container" class="cart-items">
                <p style="text-align:center; color:#888;">購物車是空的</p>
            </div>
            <div class="cart-total">總計: NT$ <span id="cart-total-price">0</span></div>
            <button class="checkout-btn" onclick="checkout()">
                <i class="fab fa-line"></i> 用 LINE 傳送訂單結帳
            </button>
            <p style="font-size:0.8rem; color:#888; margin-top:10px; text-align:center;">*點擊後將跳轉至 LINE 發送訂單訊息</p>
        </div>
    </div>

    <script>
        // 1. 商品資料庫 (已更新為 六月六 風格產品)
        const products = [
            { id: 1, name: "晨光果香・香緻櫻桃蛋糕 (6吋)", price: 950, img: "https://img.1shop.tw/dmLqpoYEVREL8bnAbZy2XK7l/Xno5Qb1D3MVm54rzl67ZWPv9/600x-2.jpg.avif" },
            { id: 2, name: "晨光果香・靜藍果香藍莓蛋糕 (6吋)", price: 980, img: "https://img.1shop.tw/dmLqpoYEVREL8bnAbZy2XK7l/Xno5Qb1D3MVm54rzl67ZWPv9/600x-2.jpg.avif" },
            { id: 3, name: "晨光果香・橙香蛋糕 (6吋)", price: 920, img: "https://img.1shop.tw/dmLqpoYEVREL8bnAbZy2XK7l/Xno5Qb1D3MVm54rzl67ZWPv9/600x-2.jpg.avif" },
            { id: 4, name: "輕柔如雲・輕乳酪蛋糕 (6吋)", price: 350, img: "https://images.unsplash.com/photo-1533134242443-d4fd215305ad?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" },
            { id: 5, name: "一層一層的茶韻・伯爵千層蛋糕 (8吋)", price: 1176, img: "https://images.unsplash.com/photo-1571115177098-24ec42ed204d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" },
            { id: 6, name: "一層一層的醇香・蒙布朗栗子千層 (8吋)", price: 1230, img: "https://images.unsplash.com/photo-1579306194872-64d3b7bac4c2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" },
            { id: 7, name: "融化一刻・柔糖布丁 (單個)", price: 45, img: "https://images.unsplash.com/photo-1515037028865-0a2a82603f7c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" },
            { id: 8, name: "一層一層的溫柔・海鹽焦糖千層 (8吋)", price: 1176, img: "https://images.unsplash.com/photo-1574085733277-851d9d856a3a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" }
        ];

        // 2. 初始化購物車 (從 LocalStorage 讀取)
        let cart = JSON.parse(localStorage.getItem('myDessertCart')) || [];

        // 簡單的資料遷移
        const validIds = products.map(p => p.id);
        const hasInvalidItems = cart.some(item => !validIds.includes(item.id));
        if (hasInvalidItems) {
            cart = []; 
            localStorage.setItem('myDessertCart', JSON.stringify(cart));
        } else if (cart.length > 0 && !cart[0].quantity) {
            const newCart = [];
            const counts = {};
            cart.forEach(item => {
                if (counts[item.id]) {
                    counts[item.id].quantity += 1;
                } else {
                    counts[item.id] = { ...item, quantity: 1 };
                    newCart.push(counts[item.id]);
                }
            });
            cart = newCart;
            localStorage.setItem('myDessertCart', JSON.stringify(cart));
        }

        // 3. 渲染產品列表
        const productList = document.getElementById('product-list');
        products.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.innerHTML = `
                <img src="${product.img}" alt="${product.name}" class="product-img">
                <div class="product-info">
                    <div class="product-title">${product.name}</div>
                    <div class="product-price">NT$ ${product.price}</div>
                    <button class="add-btn" onclick="openProductModal(${product.id})">加入購物車</button>
                </div>
            `;
            productList.appendChild(card);
        });

        // 更新購物車圖標數字
        function updateCartCount() {
            const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').innerText = totalCount;
        }
        updateCartCount();

        // ----------------- 新增：產品 Modal 邏輯 -----------------
        let currentModalProductId = null;
        let currentModalQuantity = 1;

        // 開啟產品 Modal
        function openProductModal(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            currentModalProductId = id;
            currentModalQuantity = 1;

            document.getElementById('modal-product-name').innerText = product.name;
            document.getElementById('modal-product-img').src = product.img;
            document.getElementById('modal-product-price').innerText = `NT$ ${product.price}`;
            document.getElementById('modal-quantity').innerText = currentModalQuantity;

            document.getElementById('product-modal-overlay').style.display = 'flex';
        }

        // 關閉產品 Modal
        function closeProductModal() {
            document.getElementById('product-modal-overlay').style.display = 'none';
        }

        // 調整 Modal 中的數量
        function adjustModalQuantity(change) {
            currentModalQuantity += change;
            if (currentModalQuantity < 1) currentModalQuantity = 1;
            document.getElementById('modal-quantity').innerText = currentModalQuantity;
        }

        // 確認加入購物車
        function confirmAddToCart() {
            if (!currentModalProductId) return;

            const product = products.find(p => p.id === currentModalProductId);
            const existingItem = cart.find(item => item.id === currentModalProductId);

            if (existingItem) {
                existingItem.quantity += currentModalQuantity;
            } else {
                cart.push({ ...product, quantity: currentModalQuantity });
            }

            localStorage.setItem('myDessertCart', JSON.stringify(cart));
            updateCartCount();
            closeProductModal();
            
            // 可選：顯示一個小的提示訊息
            // alert(`已將 ${currentModalQuantity} 個「${product.name}」加入購物車！`);
        }
        // -------------------------------------------------------

        // 5. 開關購物車視窗
        function toggleCart() {
            const overlay = document.getElementById('cart-overlay');
            if (overlay.style.display === 'flex') {
                overlay.style.display = 'none';
            } else {
                renderCartItems();
                overlay.style.display = 'flex';
            }
        }

        // 6. 渲染購物車內容
        function renderCartItems() {
            const container = document.getElementById('cart-items-container');
            const totalEl = document.getElementById('cart-total-price');
            container.innerHTML = '';
            
            if (cart.length === 0) {
                container.innerHTML = '<p style="text-align:center; color:#888;">購物車是空的</p>';
                totalEl.innerText = '0';
                return;
            }

            let total = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const div = document.createElement('div');
                div.className = 'cart-item';
                div.innerHTML = `
                    <div class="cart-item-info" style="flex: 1;">
                        <strong>${item.name}</strong>
                        <small>NT$ ${item.price}</small>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 10px; margin-right: 15px;">
                        <button onclick="updateQuantity(${item.id}, -1)" style="width: 25px; height: 25px; border-radius: 50%; border: 1px solid #ccc; background: white; cursor: pointer;">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, 1)" style="width: 25px; height: 25px; border-radius: 50%; border: 1px solid #ccc; background: white; cursor: pointer;">+</button>
                    </div>

                    <div style="font-weight: bold; width: 60px; text-align: right;">$${itemTotal}</div>
                    
                    <i class="fas fa-trash remove-item" onclick="removeFromCart(${index})" style="margin-left: 15px;"></i>
                `;
                container.appendChild(div);
            });
            totalEl.innerText = total;
        }

        // 更新數量功能
        function updateQuantity(id, change) {
            const item = cart.find(item => item.id === id);
            if (!item) return;

            item.quantity += change;

            if (item.quantity <= 0) {
                const confirmDelete = confirm(`確定要移除「${item.name}」嗎？`);
                if (confirmDelete) {
                    cart = cart.filter(i => i.id !== id);
                } else {
                    item.quantity = 1; // 恢復為 1
                }
            }

            localStorage.setItem('myDessertCart', JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
        }

        // 7. 移除商品
        function removeFromCart(index) {
            if(confirm('確定要刪除此商品嗎？')) {
                cart.splice(index, 1);
                localStorage.setItem('myDessertCart', JSON.stringify(cart));
                updateCartCount();
                renderCartItems();
            }
        }

        // 8. 結帳功能
        function checkout() {
            if (cart.length === 0) {
                alert('購物車是空的喔！');
                return;
            }

            // 整理訂單內容
            let message = "您好，我想訂購以下甜點：\n";
            let total = 0;
            
            cart.forEach(item => {
                message += `- ${item.name} x ${item.quantity}\n`;
                total += item.price * item.quantity;
            });
            
            message += `\n總金額：NT$ ${total}`;
            message += `\n\n(請在此留下您的收件人姓名、電話與地址)`;

            // 使用 LINE URL Scheme 分享文字
            const lineUrl = `https://line.me/R/msg/text/?${encodeURIComponent(message)}`;
            
            window.open(lineUrl, '_blank');
        }
    </script>
</body>
</html>